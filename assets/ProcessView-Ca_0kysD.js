import{_ as w,b as _,o as i,c as l,F as m,r as g,w as v,v as I,a as n,t as f,d,e as r,f as y}from"./index-ciT24oRA.js";import{c as b,d as B,r as S}from"./index-BBP_Ch13.js";import{M as $}from"./bootstrap.esm-Ceob_0pG.js";const T={name:"TaskList",components:{FontAwesomeIcon:_},emits:["showInfo"],props:{tasks:Array}},E={class:"list-group"},C=["onUpdate:modelValue","value"],M={class:"ms-2 flex-grow-1 d-flex justify-content-between"},O=["onClick"],H=["onClick"];function A(s,o,t,e,h,as){const k=y("FontAwesomeIcon");return i(),l("div",E,[(i(!0),l(m,null,g(t.tasks,a=>(i(),l("div",{class:"list-group-item d-flex",key:a.fields.name},[v(n("input",{class:"form-check-input","onUpdate:modelValue":u=>a.checked=u,type:"checkbox",value:a.checked},null,8,C),[[I,a.checked]]),n("div",M,[n("div",{class:"flex-grow-1",onClick:u=>a.checked=!a.checked},f(a.fields.name),9,O),a.fields.description?(i(),l("div",{key:0,onClick:u=>s.$emit("showInfo",a)},[d(k,{icon:"circle-info"})],8,H)):r("",!0)])]))),128))])}const c=w(T,[["render",A]]),L={key:0,class:"container"},V={class:"h1"},q={key:0,class:"mt-3"},D=n("div",{class:"h2"},"Wagen",-1),F={key:1,class:"mt-3"},N=n("div",{class:"h2"},"Weg zum Boot",-1),G={key:2,class:"mt-3"},P=n("div",{class:"h2"},"Am Boot",-1),W={key:3,class:"mt-3"},j=n("div",{class:"h2"},"Weg zurück",-1),z={key:4,class:"mt-3"},J=n("div",{class:"h2"},"Zurück im Wagen",-1),K={key:5,class:"mt-3"},R=n("div",{class:"h2"},"Bootinstruktionen",-1),U={key:6,class:"mt-3"},Q=n("div",{class:"h2"},"Ablegen",-1),Y={class:"modal fade",tabindex:"-1",id:"infoModal"},Z={class:"modal-dialog"},X={class:"modal-content"},x={class:"modal-header sticky-top bg-light"},ss={class:"modal-title"},os=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ts=["innerHTML"],es="gdb2xwu41tp3",ns="sog4clElan4c9rnNSsqJhxf42oLKRfSxQimYOJBxEu4",p=b.createClient({space:es,accessToken:ns}),is={renderNode:{[B.BLOCKS.EMBEDDED_ASSET]:({data:{target:{fields:s}}})=>`<img src="${s.file.url}" width="300" alt="${s.description}"/>`}},ls={name:"ProcessView",props:{processId:String,processId2:String},data(){return{process:null,infoHeader:null,info:null}},computed:{wagon(){return this.process.tasks.filter(s=>s.fields.location==="wagon")},toBoat(){return this.process.tasks.filter(s=>s.fields.location==="toBoat")},boat(){return this.process.tasks.filter(s=>s.fields.location==="boat")},fromBoat(){return this.process.tasks.filter(s=>s.fields.location==="fromBoat")},welcomeGuests(){return this.process.tasks.filter(s=>s.fields.location==="welcomeGuests")},instructions(){return this.process.tasks.filter(s=>s.fields.location==="instructions")},setOff(){return this.process.tasks.filter(s=>s.fields.location==="setOff")}},methods:{async loadTasks(){console.log("processId: "+this.processId);const s=await this.loadProcess(this.processId,this.$route.query.trip==="true");if(this.processId2){console.log("processId2: "+this.processId2);const o=await this.loadProcess(this.processId2,this.$route.query.trip2==="true");s.tasks.push.apply(s.tasks,o.tasks),s.title+=" "+o.title}this.process=s},async loadProcess(s,o){let t=await p.getEntry(s).then(e=>e.fields).catch(e=>console.error(e));if(t.includes){const e=await p.getEntry(t.includes.sys.id).then(h=>h.fields.tasks).catch(h=>console.log(h));e.push.apply(e,t.tasks),t.tasks=e}return o||(t.tasks=t.tasks.filter(e=>!e.fields.tripOnly)),t},showInfo(s){this.infoHeader=s.fields.name,this.info=S.documentToHtmlString(s.fields.description,is),this.uniqueModal=new $(document.getElementById("infoModal"),{keyboard:!1}),this.uniqueModal.show()}},watch:{processId:{handler(s){s&&this.loadTasks()},immediate:!0}}},hs=Object.assign(ls,{setup(s){return(o,t)=>(i(),l(m,null,[o.process?(i(),l("div",L,[n("div",V,f(o.process.title),1),o.wagon.length>0?(i(),l("div",q,[D,d(c,{tasks:o.wagon,onShowInfo:t[0]||(t[0]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.toBoat.length>0?(i(),l("div",F,[N,d(c,{tasks:o.toBoat,onShowInfo:t[1]||(t[1]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.boat.length>0?(i(),l("div",G,[P,d(c,{tasks:o.boat,onShowInfo:t[2]||(t[2]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.fromBoat.length>0?(i(),l("div",W,[j,d(c,{tasks:o.fromBoat,onShowInfo:t[3]||(t[3]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.welcomeGuests.length>0?(i(),l("div",z,[J,d(c,{tasks:o.welcomeGuests,onShowInfo:t[4]||(t[4]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.instructions.length>0?(i(),l("div",K,[R,d(c,{tasks:o.instructions,onShowInfo:t[5]||(t[5]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0),o.setOff.length>0?(i(),l("div",U,[Q,d(c,{tasks:o.setOff,onShowInfo:t[6]||(t[6]=e=>o.showInfo(e))},null,8,["tasks"])])):r("",!0)])):r("",!0),n("div",Y,[n("div",Z,[n("div",X,[n("div",x,[n("h5",ss,f(o.infoHeader),1),os]),n("div",{class:"modal-body",innerHTML:o.info},null,8,ts)])])])],64))}});export{hs as default};
