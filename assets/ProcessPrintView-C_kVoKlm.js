import{_ as f,o as i,c as r,r as k,a as n,t as p,e as a,F as m,d as c}from"./index-ciT24oRA.js";import{c as _,d as g,r as y}from"./index-BBP_Ch13.js";const v={name:"TaskList",props:{tasks:Array}},w={class:"ms-2"},B={class:"fw-bold"},T=["innerHTML"];function $(s,t,o,e,d,K){return i(!0),r(m,null,k(o.tasks,u=>(i(),r("div",{class:"mt-4",key:u.fields.name},[n("div",w,[n("div",B,p(u.fields.name),1),u.fields.description?(i(),r("div",{key:0,class:"ms-3",innerHTML:u.info},null,8,T)):a("",!0)])]))),128)}const l=f(v,[["render",$]]),E={key:0,class:"container"},I={class:"h1"},b={key:0,class:"mt-3"},O=n("div",{class:"h2"},"Wagen",-1),S={key:1,class:"mt-3"},L=n("div",{class:"h2"},"Weg zum Boot",-1),H={key:2,class:"mt-3"},N=n("div",{class:"h2"},"Am Boot",-1),P={key:3,class:"mt-3"},A=n("div",{class:"h2"},"Weg zurück",-1),D={key:4,class:"mt-3"},G=n("div",{class:"h2"},"Zurück im Wagen",-1),V={key:5,class:"mt-3"},W=n("div",{class:"h2"},"Bootinstruktionen",-1),q={key:6,class:"mt-3"},C=n("div",{class:"h2"},"Ablegen",-1),M="gdb2xwu41tp3",z="sog4clElan4c9rnNSsqJhxf42oLKRfSxQimYOJBxEu4",h=_.createClient({space:M,accessToken:z}),F={renderNode:{[g.BLOCKS.EMBEDDED_ASSET]:({data:{target:{fields:s}}})=>`<img src="${s.file.url}" width="300" alt="${s.description}"/>`}},J={name:"ProcessView",props:{processId:String,processId2:String},data(){return{process:null,infoHeader:null,info:null}},computed:{wagon(){return this.process.tasks.filter(s=>s.fields.location==="wagon")},toBoat(){return this.process.tasks.filter(s=>s.fields.location==="toBoat")},boat(){return this.process.tasks.filter(s=>s.fields.location==="boat")},fromBoat(){return this.process.tasks.filter(s=>s.fields.location==="fromBoat")},welcomeGuests(){return this.process.tasks.filter(s=>s.fields.location==="welcomeGuests")},instructions(){return this.process.tasks.filter(s=>s.fields.location==="instructions")},setOff(){return this.process.tasks.filter(s=>s.fields.location==="setOff")}},methods:{async loadTasks(){console.log("processId: "+this.processId);const s=await this.loadProcess(this.processId,this.$route.query.trip==="true");if(this.processId2){console.log("processId2: "+this.processId2);const t=await this.loadProcess(this.processId2,this.$route.query.trip2==="true");s.tasks.push.apply(s.tasks,t.tasks),s.title+=" "+t.title}this.process=s},async loadProcess(s,t){let o=await h.getEntry(s).then(e=>e.fields).catch(e=>console.error(e));if(o.includes){const e=await h.getEntry(o.includes.sys.id).then(d=>d.fields.tasks).catch(d=>console.error(d));e.push.apply(e,o.tasks),o.tasks=e}return t||(o.tasks=o.tasks.filter(e=>!e.fields.tripOnly)),o.tasks=o.tasks.map(e=>({...e,info:y.documentToHtmlString(e.fields.description,F)})),o}},watch:{processId:{handler(s){s&&this.loadTasks()},immediate:!0}}},Q=Object.assign(J,{setup(s){return(t,o)=>t.process?(i(),r("div",E,[n("div",I,p(t.process.title),1),t.wagon.length>0?(i(),r("div",b,[O,c(l,{tasks:t.wagon},null,8,["tasks"])])):a("",!0),t.toBoat.length>0?(i(),r("div",S,[L,c(l,{tasks:t.toBoat},null,8,["tasks"])])):a("",!0),t.boat.length>0?(i(),r("div",H,[N,c(l,{tasks:t.boat},null,8,["tasks"])])):a("",!0),t.fromBoat.length>0?(i(),r("div",P,[A,c(l,{tasks:t.fromBoat},null,8,["tasks"])])):a("",!0),t.welcomeGuests.length>0?(i(),r("div",D,[G,c(l,{tasks:t.welcomeGuests},null,8,["tasks"])])):a("",!0),t.instructions.length>0?(i(),r("div",V,[W,c(l,{tasks:t.instructions},null,8,["tasks"])])):a("",!0),t.setOff.length>0?(i(),r("div",q,[C,c(l,{tasks:t.setOff},null,8,["tasks"])])):a("",!0)])):a("",!0)}});export{Q as default};
